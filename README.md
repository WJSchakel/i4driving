# i4driving
This project contains an extension of OTS (https://github.com/averbraeck/opentrafficsim) for the i4Driving research project. In this project OTS is extended to be a suitable testing environment for self-driving vehicles. This is achieved by letting automated vehicles drive in simulation, interacting with vehicles that are modelled with state-of-the-art models for human drivers. These models include social interactions and human factors on perception and imperfect driving.

Results from the project are merged with the codebase of OTS. In particular:
- A **model library** for human drivers is available through the [LmrsFactory](https://github.com/averbraeck/opentrafficsim/blob/v1.8.0/ots-road/src/main/java/org/opentrafficsim/road/gtu/lane/tactical/lmrs/LmrsFactory.java), which creates the tactical behavioral model and the perception layer.
- A perception model based on the concept of the **Attention Matrix** is available at [ChannelFuller](https://github.com/averbraeck/opentrafficsim/blob/v1.8.0/ots-road/src/main/java/org/opentrafficsim/road/gtu/lane/perception/mental/channel/ChannelFuller.java). The implementation of the perception layer assigns a level of attention to different perception channels, resulting in different perception delays between different areas of attention. The concept of Fuller's task-capability interface relates overall task demand with task capacity, and drives behavioral adaptation on desired speed, desired headway, and possibly other factors. Perception errors on stimuli, in particular distance and speed differences, depend on the level of task saturation.
- A **co-simulation interface** is available under [OtsTransceiver](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/main/java/org/opentrafficsim/i4driving/sim0mq/OtsTransceiver.java)\*. This can be used to integrate the i4Driving model in to any driver simulator or microscopic simulation tool. A full description of the features and technical implementation is available in a project document, and will also be documented within OTS.
- Various other elements developed in the project are also available, including visualizations of the human factors:
    - [PerceptionAnimation](https://github.com/averbraeck/opentrafficsim/blob/v1.8.0/ots-animation/src/main/java/org/opentrafficsim/animation/PerceptionAnimation.java) to animate level of attention and perception delays on a GTU,
    - [AttentionGtuColorer](https://github.com/averbraeck/opentrafficsim/blob/v1.8.0/ots-animation/src/main/java/org/opentrafficsim/animation/gtu/colorer/AttentionGtuColorer.java) to indicate the maximum level of attention of a GTU,
    - extended data types for trajectory output [TaskDemandData](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/main/java/org/opentrafficsim/i4driving/sampling/TaskDemandData.java)\*, [DataTypeAttention](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/main/java/org/opentrafficsim/i4driving/demo/AttentionDemoUrban.java#L609)\* [ExtendedDataRho](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/test/java/org/opentrafficsim/i4driving/test/SocialPressureProxy.java#L543)\*, [TaskDemandData](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/main/java/org/opentrafficsim/i4driving/sampling/TaskDemandData.java)\*, [TaskSaturationData](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/main/java/org/opentrafficsim/i4driving/sampling/TaskSaturationData.java)\*,
    - and [ContourPlotExtendedData](https://github.com/WJSchakel/i4driving/blob/main/i4driving-ots/src/main/java/org/opentrafficsim/i4driving/demo/plots/ContourPlotExtendedData.java)\* to provide a space-time contour plot visualization of any extended data type.

*) To be integrated with the OTS codebase.
